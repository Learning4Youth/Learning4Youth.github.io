import React, { useState, useEffect } from 'react';

export default function SocialGenLanding() {
  const [darkMode, setDarkMode] = useState(true);
  const [visibleItems, setVisibleItems] = useState([]);
  const [hoveredCard, setHoveredCard] = useState(null);
  const [selectedImage, setSelectedImage] = useState(null);
  const [hoveredImage, setHoveredImage] = useState(null);
  const [showLogin, setShowLogin] = useState(false);
  const [loginEmail, setLoginEmail] = useState('');
  const [loginPassword, setLoginPassword] = useState('');
  const [loginMessage, setLoginMessage] = useState(null);
  const [isLoggingIn, setIsLoggingIn] = useState(false);

  useEffect(() => {
    const items = [0, 1, 2, 3, 4, 5, 6, 7, 8];
    items.forEach((item, index) => {
      setTimeout(() => {
        setVisibleItems(prev => [...prev, item]);
      }, index * 150);
    });
  }, []);

  const handleLogin = async () => {
    setIsLoggingIn(true);
    setLoginMessage(null);
    
    try {
      const module = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm');
      const createClient = module.createClient;
      const supabaseUrl = 'https://dbfygrskxsvlcmvvolgu.supabase.co';
      const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRiZnlncnNreHN2bGNtdnZvbGd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwOTczMTksImV4cCI6MjA3NDY3MzMxOX0.E20J6GwHWDmvD52U8tUobJwPZTt07GMAH5kpofixs3g';
      const supabase = createClient(supabaseUrl, supabaseAnonKey);
      
      const result = await supabase
        .from('Users')
        .select('*')
        .eq('e-mail', loginEmail.trim())
        .eq('Password', loginPassword.trim());
      
      if (result.error) throw result.error;
      
      if (result.data && result.data.length > 0) {
        const user = result.data[0];
        setLoginMessage({
          type: 'success',
          text: 'Welcome back, ' + user['Name Surname'] + '! Credits: ' + user.Credits
        });
        sessionStorage.setItem('user', JSON.stringify(user));
        sessionStorage.setItem('isLoggedIn', 'true');
        setTimeout(() => setShowLogin(false), 2000);
      } else {
        setLoginMessage({ type: 'error', text: 'Invalid email or password' });
      }
    } catch (error) {
      setLoginMessage({ type: 'error', text: 'Login failed: ' + error.message });
    } finally {
      setIsLoggingIn(false);
    }
  };

  const generators = [
    {
      title: 'Social Media Posts',
      desc: 'Generate eye-catching posts optimized for Instagram, Twitter, Facebook, and LinkedIn. AI-powered captions and hashtags included.',
      images: [
        'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1614680376739-414d95ff43df?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1432888622747-4eb9a8f2c293?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1563986768609-322da13575f3?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'Carousel Posts',
      desc: 'Create stunning multi-slide carousels that tell compelling stories. Perfect for educational content and product showcases.',
      images: [
        'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1557804506-669a67965ba0?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1553877522-43269d4ea984?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'AI Image Generation',
      desc: 'Transform text into stunning visuals. Generate custom images, graphics, and designs tailored to your brand.',
      images: [
        'https://images.unsplash.com/photo-1618005198919-d3d4b5a92ead?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1547826039-bfc35e0f1ea8?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1634017839464-5c339ebe3cb4?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'Short Videos',
      desc: 'Create viral-ready short-form content for TikTok, Reels, and Shorts. Auto-captions, effects, and music suggestions.',
      images: [
        'https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1536240478700-b869070f9279?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1626785774573-4b799315345d?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'Long-Form Videos',
      desc: 'Produce professional YouTube videos, tutorials, and webinars. Script generation, scene planning, and editing assistance.',
      images: [
        'https://images.unsplash.com/photo-1492619375914-88005aa9e8fb?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1478737270239-2f02b77fc618?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1485846234645-a62644f84728?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1522069169874-c58ec4b76be5?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'Presentations',
      desc: 'Design beautiful presentations and pitch decks. Smart layouts, data visualization, and compelling storytelling.',
      images: [
        'https://images.unsplash.com/photo-1517048676732-d65bc937f952?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1556761175-b413da4baf72?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'Engagement Strategies',
      desc: 'AI-driven engagement plans, best posting times, content calendars, and growth tactics tailored to your audience.',
      images: [
        'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1504868584819-f8e8b4b6d7e3?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1543286386-713bdd548da4?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'Quiz Questions',
      desc: 'Generate interactive quizzes that boost engagement. Perfect for Stories, polls, and audience interaction.',
      images: [
        'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1606326608606-aa0b62935f2b?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400&h=400&fit=crop'
      ]
    },
    {
      title: 'SEO-Friendly Blog Posts',
      desc: 'Create optimized blog content that ranks. Keyword research, SEO optimization, meta descriptions, and compelling articles that drive traffic.',
      images: [
        'https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1455390582262-044cdead277a?w=400&h=400&fit=crop',
        'https://images.unsplash.com/photo-1471107340929-a87cd0f5b5f3?w=400&h=400&fit=crop'
      ]
    }
  ];

  return (
    <div className={`min-h-screen transition-colors duration-1000 ${darkMode ? 'bg-orange-600 text-white' : 'bg-gray-200 text-black'}`}>
      <div className="fixed inset-0 opacity-20 pointer-events-none">
        <div className="absolute top-0 left-0 w-full h-full" style={{
          background: darkMode 
            ? 'radial-gradient(circle at 20% 30%, rgba(249, 115, 22, 0.3), transparent 50%), radial-gradient(circle at 80% 70%, rgba(234, 88, 12, 0.2), transparent 50%)'
            : 'radial-gradient(circle at 20% 30%, rgba(156, 163, 175, 0.3), transparent 50%), radial-gradient(circle at 80% 70%, rgba(107, 114, 128, 0.2), transparent 50%)'
        }}></div>
      </div>

      {darkMode && (
        <>
          <div className="fixed top-20 left-20 w-96 h-96 bg-orange-500/8 rounded-full blur-3xl animate-float"></div>
          <div className="fixed bottom-20 right-20 w-80 h-80 bg-orange-700/8 rounded-full blur-3xl animate-float-delay"></div>
          <div className="fixed top-1/2 right-1/3 w-72 h-72 bg-orange-400/8 rounded-full blur-3xl animate-float-slow"></div>
        </>
      )}

      {!darkMode && (
        <>
          <div className="fixed top-20 left-20 w-96 h-96 bg-gray-400/15 rounded-full blur-3xl animate-float"></div>
          <div className="fixed bottom-20 right-20 w-80 h-80 bg-gray-500/15 rounded-full blur-3xl animate-float-delay"></div>
          <div className="fixed top-1/2 right-1/3 w-72 h-72 bg-gray-300/15 rounded-full blur-3xl animate-float-slow"></div>
        </>
      )}

      {showLogin && (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4" onClick={() => setShowLogin(false)}>
          <div className={`w-full max-w-md rounded-2xl p-8 ${darkMode ? 'bg-zinc-800' : 'bg-white'} shadow-2xl`} onClick={(e) => e.stopPropagation()}>
            <div className="text-center mb-8">
              <h2 className={`text-4xl font-bold ${darkMode ? 'text-white' : 'text-black'}`}>Login</h2>
            </div>

            <div>
              <div className="mb-4">
                <label className={`block mb-2 font-medium ${darkMode ? 'text-white' : 'text-black'}`}>Email</label>
                <input
                  type="email"
                  value={loginEmail}
                  onChange={(e) => setLoginEmail(e.target.value)}
                  placeholder="your@email.com"
                  className={`w-full px-4 py-3 rounded-xl border-2 transition-all ${
                    darkMode 
                      ? 'bg-zinc-700 border-zinc-600 text-white focus:border-orange-500' 
                      : 'bg-gray-50 border-gray-300 text-black focus:border-orange-500'
                  } focus:outline-none focus:ring-4 focus:ring-orange-500/20`}
                />
              </div>

              <div className="mb-6">
                <label className={`block mb-2 font-medium ${darkMode ? 'text-white' : 'text-black'}`}>Password</label>
                <input
                  type="password"
                  value={loginPassword}
                  onChange={(e) => setLoginPassword(e.target.value)}
                  placeholder="Enter your password"
                  className={`w-full px-4 py-3 rounded-xl border-2 transition-all ${
                    darkMode 
                      ? 'bg-zinc-700 border-zinc-600 text-white focus:border-orange-500' 
                      : 'bg-gray-50 border-gray-300 text-black focus:border-orange-500'
                  } focus:outline-none focus:ring-4 focus:ring-orange-500/20`}
                />
              </div>

              <button
                onClick={handleLogin}
                disabled={isLoggingIn}
                className="w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:shadow-lg hover:shadow-orange-500/50 transition-all disabled:opacity-50"
              >
                {isLoggingIn ? 'Signing In...' : 'Sign In'}
              </button>
            </div>

            {loginMessage && (
              <div className={`mt-4 p-4 rounded-xl text-center ${
                loginMessage.type === 'success' 
                  ? 'bg-green-900/20 border border-green-500/30 text-green-400' 
                  : 'bg-red-900/20 border border-red-500/30 text-red-400'
              }`}>
                {loginMessage.text}
              </div>
            )}
          </div>
        </div>
      )}

      {selectedImage !== null && (
        <div 
          className="fixed inset-0 z-50 flex items-center justify-center backdrop-blur-3xl p-4"
          style={{
            backgroundColor: darkMode ? 'rgba(24, 24, 27, 0.7)' : 'rgba(243, 244, 246, 0.7)'
          }}
          onClick={() => setSelectedImage(null)}
        >
          <div className="relative max-w-6xl max-h-[90vh]">
            <button
              onClick={() => setSelectedImage(null)}
              className={`absolute -top-12 right-0 transition-colors ${
                darkMode ? 'text-white hover:text-orange-500' : 'text-black hover:text-orange-600'
              }`}
            >
              <svg className="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
            <img 
              src={selectedImage} 
              alt="Full size" 
              className="rounded-2xl max-w-full max-h-[90vh] object-contain shadow-2xl"
            />
          </div>
        </div>
      )}

      <header className={`fixed top-0 w-full z-30 backdrop-blur-lg ${darkMode ? 'bg-orange-600/80' : 'bg-white/80'}`}>
        <div className="max-w-7xl mx-auto px-8 py-6 flex justify-between items-center">
          <div className={`text-2xl font-bold ${darkMode ? 'text-black' : 'text-black'}`}>
            SocialGen
          </div>
          <div className="flex items-center gap-8">
            <button
              onClick={() => setDarkMode(!darkMode)}
              className={`w-12 h-12 rounded-full flex items-center justify-center transition-all hover:rotate-180 ${darkMode ? 'bg-white/10 border border-white/20' : 'bg-gray-200 border border-gray-300'}`}
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
            </button>
            <button 
              onClick={() => setShowLogin(true)}
              className={`${darkMode ? 'text-white hover:text-orange-500' : 'text-black hover:text-orange-600'} transition-colors font-medium`}
            >
              Login
            </button>
          </div>
        </div>
      </header>

      <section className="min-h-screen flex flex-col justify-center items-center text-center px-8 pt-24 relative overflow-hidden">
        <h1 className="text-7xl md:text-8xl font-extrabold mb-6 relative z-10">
          Create Content That<br />
          <span className={darkMode ? 'text-black' : 'text-white'}>
            Goes Viral
          </span>
        </h1>
        <p className={`text-xl md:text-2xl max-w-3xl mb-12 relative z-10 ${darkMode ? 'text-black' : 'text-white'}`}>
          AI-powered tools to generate stunning social media posts, videos, carousels, presentations, and engagement strategies in seconds
        </p>
      </section>

      <section className="px-8 py-32 relative">
        <h2 className="text-5xl md:text-6xl font-extrabold text-center mb-4">
          Our <span className={darkMode ? 'text-white' : 'text-black'}>Generators</span>
        </h2>
        <p className={`text-xl text-center mb-20 ${darkMode ? 'text-white' : 'text-gray-800'}`}>
          Everything you need to dominate social media
        </p>

        <div className="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-16">
          {generators.map((gen, idx) => (
            <div
              key={idx}
              onMouseEnter={() => setHoveredCard(idx)}
              onMouseLeave={() => setHoveredCard(null)}
              className={`rounded-3xl overflow-hidden transition-all duration-700 relative ${
                visibleItems.includes(idx) ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-12'
              } ${
                darkMode
                  ? 'bg-gradient-to-br from-gray-600 to-gray-700 shadow-2xl shadow-black/60'
                  : 'bg-gradient-to-br from-orange-500 to-orange-600 shadow-2xl shadow-black/60'
              } ${
                hoveredCard === idx 
                  ? darkMode
                    ? 'scale-105 shadow-black/80 shadow-3xl'
                    : 'scale-105 shadow-black/80 shadow-3xl'
                  : ''
              }`}
              style={{
                transform: hoveredCard === idx ? 'translateY(-10px)' : 'none',
                overflow: 'hidden'
              }}
            >
              <div className="absolute inset-0 pointer-events-none overflow-hidden">
                <div className={`absolute w-64 h-64 rounded-full blur-3xl animate-gradient-move-1 ${
                  darkMode ? 'bg-gray-500/15' : 'bg-orange-400/20'
                }`}></div>
                <div className={`absolute w-56 h-56 rounded-full blur-3xl animate-gradient-move-2 ${
                  darkMode ? 'bg-gray-400/15' : 'bg-orange-300/20'
                }`}></div>
                <div className={`absolute w-48 h-48 rounded-full blur-3xl animate-gradient-move-3 ${
                  darkMode ? 'bg-gray-600/15' : 'bg-orange-500/20'
                }`}></div>
              </div>

              <div className={`relative h-80 flex items-center justify-center overflow-hidden z-10 ${darkMode ? 'bg-gray-800' : 'bg-orange-700'}`}>
                <div className={`absolute inset-0 transition-opacity duration-500 ${hoveredCard === idx ? 'opacity-100' : 'opacity-0'}`}>
                  <div className={`absolute inset-0 ${darkMode ? 'bg-gradient-to-br from-gray-700/30 to-gray-600/30' : 'bg-gradient-to-br from-orange-600/30 to-orange-500/30'}`}></div>
                </div>
                <img 
                  src={gen.images[0]} 
                  alt={gen.title}
                  className="w-full h-full object-cover"
                />
              </div>
              <div className="p-8 relative z-10">
                <h3 className={`text-2xl font-bold mb-3 ${darkMode ? 'text-white' : 'text-white'}`}>
                  {gen.title}
                </h3>
                <p className={`mb-6 leading-relaxed ${darkMode ? 'text-white' : 'text-white'}`}>
                  {gen.desc}
                </p>
                
                <h4 className={`text-lg font-semibold mb-4 ${darkMode ? 'text-white' : 'text-white'}`}>
                  Examples
                </h4>
                
                <div className="grid grid-cols-4 gap-3">
                  {gen.images.map((img, imgIdx) => (
                    <div
                      key={imgIdx}
                      onMouseEnter={() => setHoveredImage(`${idx}-${imgIdx}`)}
                      onMouseLeave={() => setHoveredImage(null)}
                      onClick={() => setSelectedImage(img)}
                      className={`relative rounded-xl overflow-hidden cursor-pointer transition-all duration-300 z-20 ${
                        hoveredImage === `${idx}-${imgIdx}`
                          ? 'scale-110 z-30 shadow-2xl shadow-black/70 ring-4 ring-white'
                          : 'scale-100'
                      }`}
                      style={{
                        aspectRatio: '1/1'
                      }}
                    >
                      <img 
                        src={img} 
                        alt={`Example ${imgIdx + 1}`}
                        className="w-full h-full object-cover"
                      />
                    </div>
                  ))}
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>

      <style jsx>{`
        @keyframes gradient-shift {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-shift {
          animation: gradient-shift 20s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translate(0, 0); }
          50% { transform: translate(30px, -30px); }
        }
        @keyframes float-delay {
          0%, 100% { transform: translate(0, 0); }
          50% { transform: translate(-30px, 30px); }
        }
        @keyframes float-slow {
          0%, 100% { transform: translate(0, 0); }
          50% { transform: translate(20px, 20px); }
        }
        .animate-float {
          animation: float 15s ease-in-out infinite;
        }
        .animate-float-delay {
          animation: float-delay 18s ease-in-out infinite;
        }
        .animate-float-slow {
          animation: float-slow 22s ease-in-out infinite;
        }
        @keyframes gradient-move-1 {
          0% { 
            transform: translate(-20%, -20%);
            opacity: 0.5;
          }
          33% { 
            transform: translate(80%, 20%);
            opacity: 0.7;
          }
          66% { 
            transform: translate(20%, 80%);
            opacity: 0.6;
          }
          100% { 
            transform: translate(-20%, -20%);
            opacity: 0.5;
          }
        }
        @keyframes gradient-move-2 {
          0% { 
            transform: translate(100%, 100%);
            opacity: 0.4;
          }
          33% { 
            transform: translate(-10%, 50%);
            opacity: 0.6;
          }
          66% { 
            transform: translate(60%, -10%);
            opacity: 0.5;
          }
          100% { 
            transform: translate(100%, 100%);
            opacity: 0.4;
          }
        }
        @keyframes gradient-move-3 {
          0% { 
            transform: translate(50%, 10%);
            opacity: 0.6;
          }
          33% { 
            transform: translate(10%, 90%);
            opacity: 0.4;
          }
          66% { 
            transform: translate(90%, 40%);
            opacity: 0.7;
          }
          100% { 
            transform: translate(50%, 10%);
            opacity: 0.6;
          }
        }
        .animate-gradient-move-1 {
          animation: gradient-move-1 20s ease-in-out infinite;
        }
        .animate-gradient-move-2 {
          animation: gradient-move-2 25s ease-in-out infinite;
        }
        .animate-gradient-move-3 {
          animation: gradient-move-3 18s ease-in-out infinite;
        }
      `}</style>
    </div>
  );
}
